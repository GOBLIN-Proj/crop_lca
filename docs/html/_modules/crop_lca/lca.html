<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>crop_lca.lca &mdash; Crop LCA 0.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=37f418d5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Crop LCA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALLATION.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Crop LCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">crop_lca.lca</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for crop_lca.lca</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Crop LCA</span>
<span class="sd">========</span>
<span class="sd">This module contains the classes and methods used to calculate the carbon footprint of crop production.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">crop_lca.resource_manager.data_loader</span> <span class="kn">import</span> <span class="n">Loader</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="c1"># CO2 from Crop Biomass</span>

<div class="viewcode-block" id="Conversion">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Conversion">[docs]</a>
<span class="k">class</span> <span class="nc">Conversion</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for calculating CO2 emissions from transition from grassland to crop.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    co2_form_grassland_to_crop(data)</span>
<span class="sd">        Calculate carbon emissions from transition from grassland to crop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="Conversion.co2_form_grassland_to_crop">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Conversion.co2_form_grassland_to_crop">[docs]</a>
    <span class="k">def</span> <span class="nf">co2_form_grassland_to_crop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate carbon emissions from transition from grassland to crop.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Carbon emissions from transition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">grass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_grassland_dm_t</span><span class="p">()</span>

        <span class="n">carbon_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="n">crop_dm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_dm_carbon_stock_crops</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">temp_grass</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="p">((</span><span class="mi">0</span> <span class="o">-</span> <span class="n">grass</span> <span class="o">*</span> <span class="n">carbon_fraction</span><span class="p">)</span> <span class="o">+</span> <span class="n">crop_dm</span><span class="p">)</span></div>
</div>



<span class="c1">######################################################################################################################</span>

<span class="c1"># Direct N2O Emissions from crop Residues</span>
<div class="viewcode-block" id="Residues">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Residues">[docs]</a>
<span class="k">class</span> <span class="nc">Residues</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for calculating direct N2O emissions from crop residues.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    n_from_crop_residue_direct(data)</span>
<span class="sd">        Calculate direct N2O emissions from crop residues.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="Residues.n_from_crop_residue_direct">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Residues.n_from_crop_residue_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">n_from_crop_residue_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate direct N2O emissions from crop residues.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Direct N2O emissions from crop residues.</span>

<span class="sd">        Notes:</span>
<span class="sd">        - This method is based on the IPCC 2019 guidelines for national greenhouse gas inventories.</span>
<span class="sd">        - The method is based on the following equation:</span>

<span class="sd">            EQUATION 11.6 (UPDATED) N FROM CROP RESIDUES AND FORAGE/PASTURE RENEWAL (TIER 1) (2019 IPCC)</span>
<span class="sd">        - Where:</span>
<span class="sd">            Fcr = annual amount of N in crop residues (above and below ground), including N-fixing crops,</span>
<span class="sd">            and from forage/pasture renewal, returned to soils annually, kg N yr-1</span>

<span class="sd">            AGR = annual total amount of above-ground crop residue for crop T, kg d.m. yr-1.</span>

<span class="sd">            NAG = N content of above-ground residues for crop T, kg N (kg d.m.) -1</span>

<span class="sd">            FracRemove= fraction of above-ground residues of crop T removed annually for purposes such as feed, bedding and construction, dimensionless. Survey of experts in country is required to obtain</span>
<span class="sd">            data. If data for FracRemove are not available, assume no removal</span>

<span class="sd">            BGR = annual total amount of belowground crop residue for crop T, kg d.m. yr-1</span>

<span class="sd">            Crop_t = harvested annual dry matter yield for crop T, kg d.m. ha-1</span>

<span class="sd">            AG_dm = Above-ground residue dry matter for crop T, kg d.m. ha-1</span>

<span class="sd">            Rag = ratio of above-ground residue dry matter to harvested yield for crop T (Crop(T)), kg d.m. ha-</span>
<span class="sd">            1 (kg d.m. ha-1)-1, (Table 11.1a)</span>

<span class="sd">            RS = ratio of below-ground root biomass to above-ground shoot biomass for crop T, kg d.m.ha-1</span>
<span class="sd">            (kg d.m. ha-1)-1, (Table 11.1a)</span>

<span class="sd">            FracRenew = fraction of total area under crop T that is renewed annually 15, dimensionless. For countries</span>
<span class="sd">            where pastures are renewed on average every X years, FracRenew = 1/X. For annual crops</span>
<span class="sd">            FracRenew = 1</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">dry_matter_fraction</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;grains&quot;</span><span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;winter_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;spring_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;barley&quot;</span><span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;beans_pulses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;sorghum&quot;</span><span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;alfalfa&quot;</span><span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;non_legume_hay&quot;</span><span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;perennial_grasses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="n">Rag</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;grains&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;crops&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;maize&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;winter_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;spring_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;oats&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;barley&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;beans_pulses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;rye&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;sorghum&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;alfalfa&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;non_legume_hay&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;n_fixing_forage&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;perennial_grasses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_above_ground_residue_dry_matter_to_harvested_yield</span><span class="p">(</span>
                <span class="s2">&quot;grass_clover_mix&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>

        <span class="n">RS</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;grains&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;crops&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;maize&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;winter_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;spring_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;barley&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;beans_pulses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;sorghum&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;alfalfa&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;non_legume_hay&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;n_fixing_forage&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;perennial_grasses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_below_ground_ratio_to_above_ground_biomass</span><span class="p">(</span>
                <span class="s2">&quot;grass_clover_mix&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>

        <span class="n">crops_n_above</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;grains&quot;</span><span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;winter_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;spring_wheat&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;barley&quot;</span><span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;beans_pulses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;potatoes_tubers&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;sorghum&quot;</span><span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span><span class="s2">&quot;alfalfa&quot;</span><span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;non_legume_hay&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;n_fixing_forage&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;perennial_grasses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_of_above_ground_residues</span><span class="p">(</span>
                <span class="s2">&quot;grass_clover_mix&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>

        <span class="n">crops_n_below</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;grains&quot;</span><span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;winter_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;spring_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;barley&quot;</span><span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;beans_pulses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;sorghum&quot;</span><span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;alfalfa&quot;</span><span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span><span class="s2">&quot;non_legume_hay&quot;</span><span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span>
                <span class="s2">&quot;n_fixing_forage&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span>
                <span class="s2">&quot;perennial_grasses&quot;</span>
            <span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_n_content_below_ground</span><span class="p">(</span>
                <span class="s2">&quot;grass_clover_mix&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>

        <span class="n">slope</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;grains&quot;</span><span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;winter_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;spring_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;barley&quot;</span><span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;beans_pulses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;sorghum&quot;</span><span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;alfalfa&quot;</span><span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;non_legume_hay&quot;</span><span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;perennial_grasses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_slope</span><span class="p">(</span><span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="n">intercept</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;grains&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;grains&quot;</span><span class="p">),</span>
            <span class="s2">&quot;crops&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">),</span>
            <span class="s2">&quot;maize&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">),</span>
            <span class="s2">&quot;winter_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;winter_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;spring_wheat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;spring_wheat&quot;</span><span class="p">),</span>
            <span class="s2">&quot;oats&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;oats&quot;</span><span class="p">),</span>
            <span class="s2">&quot;barley&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;barley&quot;</span><span class="p">),</span>
            <span class="s2">&quot;beans_peas&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;beans_pulses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;potatoes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;turnips&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sugar_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;fodder_beat&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;potatoes_tubers&quot;</span><span class="p">),</span>
            <span class="s2">&quot;rye&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;rye&quot;</span><span class="p">),</span>
            <span class="s2">&quot;sorghum&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;sorghum&quot;</span><span class="p">),</span>
            <span class="s2">&quot;alfalfa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;alfalfa&quot;</span><span class="p">),</span>
            <span class="s2">&quot;non_legume_hay&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;non_legume_hay&quot;</span><span class="p">),</span>
            <span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;n_fixing_forage&quot;</span><span class="p">),</span>
            <span class="s2">&quot;perennial_grasses&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;perennial_grasses&quot;</span><span class="p">),</span>
            <span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_intercept</span><span class="p">(</span><span class="s2">&quot;grass_clover_mix&quot;</span><span class="p">),</span>
        <span class="p">}</span>


        <span class="n">Crop_t</span> <span class="o">=</span> <span class="n">dry_matter_fraction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">crop_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Crop_t</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Crop_t</span> <span class="o">=</span> <span class="n">dry_matter_fraction</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">Crop_t_output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">crop_chars</span><span class="o">.</span><span class="n">get_crop_dry_matter</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">AG_dm</span> <span class="o">=</span> <span class="n">Rag</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">crop_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">AG_dm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">AG_dm</span> <span class="o">=</span> <span class="n">Rag</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">AG_dm_output</span> <span class="o">=</span> <span class="n">Crop_t_output</span> <span class="o">*</span> <span class="n">AG_dm</span>

        <span class="n">ratio_below_ground</span> <span class="o">=</span> <span class="n">RS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">crop_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ratio_below_ground</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ratio_below_ground</span> <span class="o">=</span> <span class="n">RS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">ratio_below_ground_output</span> <span class="o">=</span> <span class="n">ratio_below_ground</span>

        <span class="n">NAG</span> <span class="o">=</span> <span class="n">crops_n_above</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">crop_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">NAG</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">NAG</span> <span class="o">=</span> <span class="n">crops_n_above</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">NAG_output</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">NAG_output</span> <span class="o">=</span> <span class="n">NAG</span>

        <span class="n">NBG</span> <span class="o">=</span> <span class="n">crops_n_below</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">crop_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">NBG</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">NBG</span> <span class="o">=</span> <span class="n">crops_n_below</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crops&quot;</span><span class="p">)</span>

        <span class="n">NBG_output</span> <span class="o">=</span> <span class="n">NBG</span>

        <span class="n">FracRemove</span> <span class="o">=</span> <span class="mf">0.95</span>

        <span class="n">FracRenew</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">AGR</span> <span class="o">=</span> <span class="n">Crop_t_output</span>

        <span class="n">BGR</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">Crop_t_output</span> <span class="o">+</span> <span class="n">AG_dm_output</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">ratio_below_ground_output</span>
            <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="n">area</span>
            <span class="o">*</span> <span class="n">FracRenew</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">NBG_output</span>

        <span class="n">AGR_total</span> <span class="o">=</span> <span class="n">AGR</span> <span class="o">*</span> <span class="n">NAG_output</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">FracRemove</span><span class="p">)</span>

        <span class="n">Fcr</span> <span class="o">=</span> <span class="n">AGR_total</span> <span class="o">+</span> <span class="n">BGR</span>

        <span class="k">return</span> <span class="n">Fcr</span></div>
</div>






<span class="c1">###############################################################################</span>
<span class="c1"># Farm &amp; Upstream Emissions</span>
<span class="c1">###############################################################################</span>
<span class="c1"># Fertiliser Use Calculations</span>

<div class="viewcode-block" id="FertilserUse">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertilserUse">[docs]</a>
<span class="k">class</span> <span class="nc">FertilserUse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for calculating fertiliser use.</span>

<span class="sd">    Methods</span>
<span class="sd">    ------- </span>
<span class="sd">    total_an_fert_use(data, urea_proportion)</span>
<span class="sd">        Total AN fert use in kg.</span>

<span class="sd">    total_urea_fert_use(data, urea_proportion)</span>
<span class="sd">        Total urea fert use in kg.</span>

<span class="sd">    total_p_fert_use(data)</span>
<span class="sd">        Total P fert use in kg.</span>

<span class="sd">    total_k_fert_use(data)</span>
<span class="sd">        Total K fert use in kg.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="FertilserUse.total_an_fert_use">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertilserUse.total_an_fert_use">[docs]</a>
    <span class="k">def</span> <span class="nf">total_an_fert_use</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the total AN fert use in kg.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total AN fert use in kg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">total_fert_an</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">crop</span> <span class="ow">in</span> <span class="n">crop_names</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">total_fert_an</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_n_per_ha</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">urea_proportion</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>

                <span class="n">total_fert_an</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_n_per_ha</span><span class="p">(</span><span class="s2">&quot;average&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">urea_proportion</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">total_fert_an</span></div>



<div class="viewcode-block" id="FertilserUse.total_urea_fert_use">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertilserUse.total_urea_fert_use">[docs]</a>
    <span class="k">def</span> <span class="nf">total_urea_fert_use</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the total urea fert use in kg.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total urea fert use in kg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">total_fert_urea</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">crop</span> <span class="ow">in</span> <span class="n">crop_names</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">total_fert_urea</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_n_per_ha</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="n">urea_proportion</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">total_fert_urea</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_n_per_ha</span><span class="p">(</span><span class="s2">&quot;average&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="n">urea_proportion</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">total_fert_urea</span></div>



<div class="viewcode-block" id="FertilserUse.total_p_fert_use">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertilserUse.total_p_fert_use">[docs]</a>
    <span class="k">def</span> <span class="nf">total_p_fert_use</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the total P fert use in kg.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total P fert use in kg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">total_fert_p</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">crop</span> <span class="ow">in</span> <span class="n">crop_names</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">total_fert_p</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_p_per_ha</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span> <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">total_fert_p</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_p_per_ha</span><span class="p">(</span><span class="s2">&quot;average&quot;</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">total_fert_p</span></div>



<div class="viewcode-block" id="FertilserUse.total_k_fert_use">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertilserUse.total_k_fert_use">[docs]</a>
    <span class="k">def</span> <span class="nf">total_k_fert_use</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the total K fert use in kg.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total K fert use in kg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">total_fert_k</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">crop</span> <span class="ow">in</span> <span class="n">crop_names</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">total_fert_k</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_k_per_ha</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span> <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
                <span class="p">)</span>

            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">total_fert_k</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">fertiliser</span><span class="o">.</span><span class="n">get_fert_kg_k_per_ha</span><span class="p">(</span><span class="s2">&quot;average&quot;</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">total_fert_k</span></div>
</div>


<span class="c1">########################################################################################################</span>
<span class="c1"># Urea Fertiliser Emissions</span>
<span class="c1">########################################################################################################</span>
<div class="viewcode-block" id="FertiliserInputs">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs">[docs]</a>
<span class="k">class</span> <span class="nc">FertiliserInputs</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for calculating emissions from fertilizer inputs.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    urea_N2O_direct(data, urea_proportion, urea_abated_proportion)</span>
<span class="sd">        Calculate total direct emissions from urea and abated urea applied to soils.</span>

<span class="sd">    urea_NH3(data, urea_proportion, urea_abated_proportion)</span>
<span class="sd">        Calculate the amount of urea and abated urea volatized as NH3.</span>

<span class="sd">    urea_nleach(data, urea_proportion, urea_abated_proportion)</span>
<span class="sd">        Calculate the amount of N from urea and abated urea leached from soils.</span>

<span class="sd">    urea_N2O_indirect(data, urea_proportion, urea_abated_proportion)</span>
<span class="sd">        Calculate indirect emissions from urea.</span>

<span class="sd">    urea_p_leach(data, urea_proportion, urea_abated_proportion)</span>
<span class="sd">        Calculate the amount of P from urea and abated urea leached from soils.</span>

<span class="sd">    n_fertiliser_P_leach(data, urea_proportion)</span>
<span class="sd">        Calculate the amount of P from N fertiliser leached from soils.</span>

<span class="sd">    p_fertiliser_P_leach(data)</span>
<span class="sd">        Calculate the amount of P from P fertiliser leached from soils.</span>

<span class="sd">    n_fertiliser_direct(data, urea_proportion)</span>
<span class="sd">        Calculate direct emissions from N fertiliser.</span>

<span class="sd">    n_fertiliser_NH3(data, urea_proportion)</span>
<span class="sd">        Calculate the amount of N fertiliser volatized as NH3.</span>

<span class="sd">    n_fertiliser_nleach(data, urea_proportion)</span>
<span class="sd">        Calculate the amount of N from AN fertiliser leached from soils.</span>

<span class="sd">    n_fertiliser_N2O_indirect(data, urea_proportion)</span>
<span class="sd">        Calculate indirect emissions from N fertiliser.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span> <span class="o">=</span> <span class="n">FertilserUse</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="FertiliserInputs.urea_N2O_direct">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.urea_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_N2O_direct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate total direct emissions from urea and abated urea applied to soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>
<span class="sd">        - urea_abated_proportion (float): Proportion of urea abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total direct emissions from urea and abated urea.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">urea_abated_factor</span> <span class="o">=</span> <span class="n">urea_abated_proportion</span>

        <span class="n">urea_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">urea_abated_proportion</span>

        <span class="n">ef_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_urea</span><span class="p">()</span>
        <span class="n">ef_urea_abated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_urea_and_nbpt</span><span class="p">()</span>

        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_factor</span>

        <span class="n">total_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_abated_factor</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">ef_urea</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">ef_urea_abated</span><span class="p">)</span></div>



<div class="viewcode-block" id="FertiliserInputs.urea_NH3">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.urea_NH3">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_NH3</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the amount of urea and abated urea volatized as NH3.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>
<span class="sd">        - urea_abated_proportion (float): Proportion of urea abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total amount of urea and abated urea volatized as NH3.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">urea_abated_factor</span> <span class="o">=</span> <span class="n">urea_abated_proportion</span>

        <span class="n">urea_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">urea_abated_proportion</span>

        <span class="n">ef_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_fracGASF_urea_fertilisers_to_nh3_and_nox</span><span class="p">(</span>
            
        <span class="p">)</span>
        <span class="n">ef_urea_abated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_fracGASF_urea_and_nbpt_to_nh3_and_nox</span><span class="p">(</span>
            
        <span class="p">)</span>

        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_factor</span>

        <span class="n">total_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_abated_factor</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">ef_urea</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">ef_urea_abated</span><span class="p">)</span></div>



<div class="viewcode-block" id="FertiliserInputs.urea_nleach">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.urea_nleach">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_nleach</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span>
    <span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the amount of N from urea and abated urea leached from soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>
<span class="sd">        - urea_abated_proportion (float): Proportion of urea abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total amount of urea and abated urea leached from soils.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">urea_abated_factor</span> <span class="o">=</span> <span class="n">urea_abated_proportion</span>

        <span class="n">urea_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">urea_abated_proportion</span>

        <span class="n">leach</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_frac_leach_runoff</span><span class="p">()</span>

        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_factor</span>

        <span class="n">total_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_abated_factor</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">+</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">leach</span></div>



<div class="viewcode-block" id="FertiliserInputs.urea_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.urea_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_N2O_indirect</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate indirect emissions from urea.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>
<span class="sd">        - urea_abated_proportion (float): Proportion of urea abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total indirect emissions from urea.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_indirect_n2o_atmospheric_deposition_to_soils_and_water</span><span class="p">(</span>
                
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_indirect_n2o_from_leaching_and_runoff</span><span class="p">(</span>
            
        <span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this functino returns the upstream CO2 emissions from electricity consumption</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">urea_proportion</span><span class="p">,</span>
                <span class="n">urea_abated_proportion</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">indirect_atmosphere</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">urea_nleach</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">urea_proportion</span><span class="p">,</span>
                <span class="n">urea_abated_proportion</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">indirect_leaching</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="FertiliserInputs.urea_P_leach">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.urea_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_P_leach</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Calculate the amount of P from urea and abated urea leached from soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>
<span class="sd">        - urea_abated_proportion (float): Proportion of urea abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total indirect emissions from urea.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_Frac_P_Leach</span><span class="p">())</span>

        <span class="n">urea_abated_factor</span> <span class="o">=</span> <span class="n">urea_abated_proportion</span>

        <span class="n">urea_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">urea_abated_proportion</span>

        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_factor</span>

        <span class="n">total_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_abated_factor</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">+</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">frac_leach</span></div>



    <span class="c1">#########################################################################################################</span>
    <span class="c1"># Nitrogen Fertiliser Emissions</span>
    <span class="c1">#########################################################################################################</span>
<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_P_leach">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.n_fertiliser_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_P_leach</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Calculate the amount of P from AN fertiliser leached from soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total indirect emissions from urea.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_Frac_P_Leach</span><span class="p">())</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">frac_leach</span></div>



<div class="viewcode-block" id="FertiliserInputs.p_fertiliser_P_leach">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.p_fertiliser_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">p_fertiliser_P_leach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Calculate the amount of P from P fertiliser leached from soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total indirect emissions from urea</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_Frac_P_Leach</span><span class="p">())</span>

        <span class="n">total_p_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_p_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">frac_leach</span></div>



<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_direct">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.n_fertiliser_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_direct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns total direct emissions from ammonium nitrate application at field level</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total direct emissions from ammonium nitrate application at field level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_ammonium_nitrate</span><span class="p">()</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">ef</span></div>



<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_NH3">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.n_fertiliser_NH3">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_NH3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns total NH3 emissions from ammonium nitrate application at field level</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total NH3 emissions from ammonium nitrate application at field level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_fracGASF_ammonium_fertilisers_to_nh3_and_nox</span><span class="p">(</span>
            
        <span class="p">)</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">ef</span></div>



<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_nleach">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.n_fertiliser_nleach">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_nleach</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
    <span class="p">):</span>  
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the amount of N from AN fertiliser leached from soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total amount of N from AN fertiliser leached from soils</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">leach</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_frac_leach_runoff</span><span class="p">()</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">leach</span></div>



<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_indirect">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.FertiliserInputs.n_fertiliser_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_indirect</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the indirect emissions from AN fertiliser.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total indirect emissions from AN fertiliser</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_indirect_n2o_atmospheric_deposition_to_soils_and_water</span><span class="p">(</span>
                
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_indirect_n2o_from_leaching_and_runoff</span><span class="p">(</span>
            
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span>
                 <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">indirect_atmosphere</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_nleach</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">indirect_leaching</span>
        <span class="p">)</span></div>
</div>




<div class="viewcode-block" id="Upstream">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream">[docs]</a>
<span class="k">class</span> <span class="nc">Upstream</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for calculating upstream emissions.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    fert_upstream_po4(data, urea_proportion)</span>
<span class="sd">        Calculate the upstream emissions from urea and ammonium fertiliser manufacture.</span>
<span class="sd">    </span>
<span class="sd">    fert_upstream_co2(data, urea_proportion)</span>
<span class="sd">        Calculate the upstream CO2 emissions from urea and ammonium fertiliser manufacture.</span>

<span class="sd">    diesel_CO2(diesel_kg)</span>
<span class="sd">        Calculate the direct and indirect upstream CO2 emissions from diesel.</span>

<span class="sd">    diesel_PO4(diesel_kg)</span>
<span class="sd">        Calculate the direct and indirect upstream PO4 emissions from diesel.</span>

<span class="sd">    elec_CO2(elec_kwh)</span>
<span class="sd">        Calculate the upstream CO2 emissions from electricity consumption.</span>

<span class="sd">    elec_PO4(elec_kwh)</span>
<span class="sd">        Calculate the upstream PO4 emissions from electricity consumption.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span> <span class="o">=</span> <span class="n">FertilserUse</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="Upstream.fert_upstream_po4">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.fert_upstream_po4">[docs]</a>
    <span class="k">def</span> <span class="nf">fert_upstream_po4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the upstream emissions from urea and ammonium fertiliser manufacture.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Upstream emissions from urea and ammonium fertiliser manufacture.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AN_fert_PO4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span>
            <span class="s2">&quot;ammonium_nitrate_fertiliser&quot;</span>
        <span class="p">)</span>  
        <span class="n">Urea_fert_PO4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span><span class="s2">&quot;urea_fert&quot;</span><span class="p">)</span>
        <span class="n">Triple_superphosphate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span><span class="s2">&quot;triple_superphosphate&quot;</span><span class="p">)</span>
        <span class="n">Potassium_chloride</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span><span class="s2">&quot;potassium_chloride&quot;</span><span class="p">)</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>
        <span class="n">total_p_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_p_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">total_k_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_k_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">AN_fert_PO4</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">Urea_fert_PO4</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">Triple_superphosphate</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_k_fert</span> <span class="o">*</span> <span class="n">Potassium_chloride</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Upstream.fert_upstream_co2">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.fert_upstream_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">fert_upstream_co2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the upstream CO2 emissions from urea and ammonium fertiliser manufacture.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - data (object): Object containing necessary data for calculation.</span>
<span class="sd">        - urea_proportion (float): Proportion of urea used as fertilizer.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Upstream CO2 emissions from urea and ammonium fertiliser manufacture.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AN_fert_CO2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span>
            <span class="s2">&quot;ammonium_nitrate_fertiliser&quot;</span>
        <span class="p">)</span>  
        <span class="n">Urea_fert_CO2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span><span class="s2">&quot;urea_fert&quot;</span><span class="p">)</span>
        <span class="n">Triple_superphosphate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span><span class="s2">&quot;triple_superphosphate&quot;</span><span class="p">)</span>
        <span class="n">Potassium_chloride</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span><span class="s2">&quot;potassium_chloride&quot;</span><span class="p">)</span>

        <span class="n">total_n_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_an_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>
        <span class="n">total_p_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_p_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">total_k_fert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_k_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span>


        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">AN_fert_CO2</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">Urea_fert_CO2</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">Triple_superphosphate</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_k_fert</span> <span class="o">*</span> <span class="n">Potassium_chloride</span><span class="p">)</span>
        <span class="p">)</span></div>

    
<div class="viewcode-block" id="Upstream.diesel_CO2">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.diesel_CO2">[docs]</a>
    <span class="k">def</span> <span class="nf">diesel_CO2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diesel_kg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the direct and indirect upstream CO2 emmisions from diesel </span>

<span class="sd">        Parameters:</span>
<span class="sd">        - diesel_kg (float): Amount of diesel used.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Direct and indirect upstream CO2 emmisions from diesel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Diesel_indir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span><span class="s2">&quot;diesel_indirect&quot;</span><span class="p">)</span>
        <span class="n">Diest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span><span class="s2">&quot;diesel_direct&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">diesel_kg</span> <span class="o">*</span> <span class="p">(</span><span class="n">Diest_dir</span> <span class="o">+</span> <span class="n">Diesel_indir</span><span class="p">)</span></div>

    

<div class="viewcode-block" id="Upstream.diesel_PO4">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.diesel_PO4">[docs]</a>
    <span class="k">def</span> <span class="nf">diesel_PO4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diesel_kg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the direct and indirect upstream PO4 emmisions from diesel</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - diesel_kg (float): Amount of diesel used.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Direct and indirect upstream PO4 emmisions from diesel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Diesel_indir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span>
            <span class="s2">&quot;diesel_indirect&quot;</span>
        <span class="p">)</span>
        <span class="n">Diest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span><span class="s2">&quot;diesel_direct&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">diesel_kg</span> <span class="o">*</span> <span class="p">(</span><span class="n">Diest_dir</span> <span class="o">+</span> <span class="n">Diesel_indir</span><span class="p">)</span></div>

    

<div class="viewcode-block" id="Upstream.elec_CO2">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.elec_CO2">[docs]</a>
    <span class="k">def</span> <span class="nf">elec_CO2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elec_kwh</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the upstream CO2 emissions from electricity consumption</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - elec_kwh (float): Amount of electricity consumed.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Upstream CO2 emissions from electricity consumption.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elec_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_co2e</span><span class="p">(</span>
            <span class="s2">&quot;electricity_consumed&quot;</span>
        <span class="p">)</span>  <span class="c1"># based on Norway hydropower</span>
        <span class="k">return</span> <span class="n">elec_kwh</span> <span class="o">*</span> <span class="n">elec_consumption</span></div>



<div class="viewcode-block" id="Upstream.elec_PO4">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.Upstream.elec_PO4">[docs]</a>
    <span class="k">def</span> <span class="nf">elec_PO4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elec_kwh</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this function returns the upstream PO4 emissions from electricity consumption</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - elec_kwh (float): Amount of electricity consumed.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Upstream PO4 emissions from electricity consumption.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elec_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">upstream</span><span class="o">.</span><span class="n">get_upstream_kg_po4e</span><span class="p">(</span>
            <span class="s2">&quot;electricity_consumed&quot;</span>
        <span class="p">)</span>  <span class="c1"># based on Norway hydropower</span>
        <span class="k">return</span> <span class="n">elec_kwh</span> <span class="o">*</span> <span class="n">elec_consumption</span></div>
</div>

    

<span class="c1">################################################################################</span>
<span class="c1"># Total Global Warming Potential of whole farms</span>
<span class="c1">################################################################################</span>
<div class="viewcode-block" id="ClimateChangeTotals">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals">[docs]</a>
<span class="k">class</span> <span class="nc">ClimateChangeTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to calculate various climate change totals based on factors like emissions, residues, fertilizers, etc.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        loader_class (Loader): An instance of the Loader class to load data.</span>
<span class="sd">        residues_class (Residues): An instance of the Residues class to handle residue data.</span>
<span class="sd">        fertiliser_emissions_class (FertiliserInputs): An instance of the FertiliserInputs class to manage fertilizer emissions.</span>
<span class="sd">        fertiliser_use_class (FertilserUse): An instance of the FertilserUse class to handle fertilizer use data.</span>
<span class="sd">        upstream_class (Upstream): An instance of the Upstream class to deal with upstream data.</span>

<span class="sd">    Methods:</span>
<span class="sd">        create_emissions_dictionary(keys): Creates a dictionary to store emissions data.</span>
<span class="sd">        create_extended_emissions_dictionary(keys): Creates an extended dictionary to store emissions data including upstream.</span>
<span class="sd">        total_residue_per_crop_direct(data): Calculates total nitrogen from all crops based on direct residue data.</span>
<span class="sd">        total_fertiliser_direct(data, urea_proportion, urea_abated_proportion): Calculates total direct emissions from urea and ammonium fertilizers.</span>
<span class="sd">        total_fertiliser_indirect(data, urea_proportion, urea_abated_proportion): Calculates total indirect emissions from urea and ammonium fertilizers.</span>
<span class="sd">        urea_co2(data, urea_proportion, urea_abated_proportion): Calculates total CO2 emissions from urea application.</span>
<span class="sd">        upstream_and_inputs_and_fuel_co2(data, urea_proportion, diesel_kg, elec_kwh): Calculates total CO2 emissions from upstream activities, inputs, and fuel usage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">residues_class</span> <span class="o">=</span> <span class="n">Residues</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span> <span class="o">=</span> <span class="n">FertilserUse</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span> <span class="o">=</span> <span class="n">Upstream</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="ClimateChangeTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dictionary to store emissions data.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list): List of keys to be used in the emissions dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with emissions data initialized to zero.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;crop_residue_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_CO2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_N2O&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">crop_keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">crop_emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">crop_key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">crop_emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">crop_keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">crop_keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">crop_emissions_dict</span></div>



<div class="viewcode-block" id="ClimateChangeTotals.create_extended_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.create_extended_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_extended_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an extended dictionary to store emissions data including upstream.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list): List of keys to be used in the emissions dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: An extended dictionary with emissions data initialized to zero, including upstream data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;crop_residue_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_CO2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_N2O&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream&quot;</span>
        <span class="p">]</span>

        <span class="n">crop_keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">crop_emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">crop_key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">crop_emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">crop_keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">crop_keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">crop_emissions_dict</span></div>

    
    
    <span class="c1">#######################################################################################################</span>
    <span class="c1"># Total  N from All crops</span>
    <span class="c1">#######################################################################################################</span>
<div class="viewcode-block" id="ClimateChangeTotals.total_residue_per_crop_direct">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.total_residue_per_crop_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">total_residue_per_crop_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total nitrogen from all crops based on direct residue data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about crops and their residues.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total nitrogen from all crops based on direct residue data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mole_weight</span> <span class="o">=</span> <span class="mf">44.0</span> <span class="o">/</span> <span class="mf">28.0</span>

        <span class="n">EF_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_emissions_factor_1_ipcc_2019</span><span class="p">()</span>

        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">crop</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            
            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">residues_class</span><span class="o">.</span><span class="n">n_from_crop_residue_direct</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">))</span> <span class="o">*</span> <span class="n">EF_1</span>
            <span class="p">)</span> <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;crop_group&quot;</span><span class="p">)</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">crop</span><span class="p">)</span><span class="o">.</span><span class="n">area</span>

        <span class="k">return</span> <span class="n">result</span> <span class="o">*</span> <span class="n">mole_weight</span></div>


    <span class="c1"># Fertiliser Application Totals for N20 and CO2</span>


<div class="viewcode-block" id="ClimateChangeTotals.total_fertiliser_direct">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.total_fertiliser_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertiliser_direct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total direct emissions from urea and ammonium fertilizers.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total direct emissions from urea and ammonium fertilizers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_N2O_direct</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_direct</span><span class="p">(</span>
           <span class="n">data</span><span class="p">,</span>  <span class="n">urea_proportion</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>



<div class="viewcode-block" id="ClimateChangeTotals.total_fertiliser_indirect">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.total_fertiliser_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertiliser_indirect</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total indirect emissions from urea and ammonium fertilizers.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total indirect emissions from urea and ammonium fertilizers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_N2O_indirect</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_indirect</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

    


<div class="viewcode-block" id="ClimateChangeTotals.urea_co2">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.urea_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_co2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">,</span> <span class="n">urea_abated_proportion</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total CO2 emissions from urea application.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total CO2 emissions from urea application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">urea_abated_factor</span> <span class="o">=</span> <span class="n">urea_abated_proportion</span>

        <span class="n">urea_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">urea_abated_proportion</span>

        <span class="n">total_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_factor</span>

        <span class="n">total_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_use_class</span><span class="o">.</span><span class="n">total_urea_fert_use</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span><span class="p">)</span> <span class="o">*</span> <span class="n">urea_abated_factor</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">((</span><span class="n">total_urea</span> <span class="o">+</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
            <span class="mi">44</span> <span class="o">/</span> <span class="mi">12</span>
        <span class="p">)</span>  <span class="c1"># adjusted to the NIR version of this calculation</span></div>

    

<div class="viewcode-block" id="ClimateChangeTotals.upstream_and_inputs_and_fuel_co2">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.ClimateChangeTotals.upstream_and_inputs_and_fuel_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">upstream_and_inputs_and_fuel_co2</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">diesel_kg</span><span class="p">,</span>
        <span class="n">elec_kwh</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total CO2 emissions from upstream activities, inputs, and fuel usage.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about upstream activities, inputs, and fuel usage.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            diesel_kg (float): Amount of diesel used in kilograms.</span>
<span class="sd">            elec_kwh (float): Amount of electricity used in kilowatt-hours.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total CO2 emissions from upstream activities, inputs, and fuel usage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">diesel_CO2</span><span class="p">(</span><span class="n">diesel_kg</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">elec_CO2</span><span class="p">(</span><span class="n">elec_kwh</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">fert_upstream_co2</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
            <span class="p">))</span></div>
</div>

    

<span class="c1">###############################################################################</span>
<span class="c1"># Water Quality EP PO4e</span>
<span class="c1">###############################################################################</span>

<div class="viewcode-block" id="EutrophicationTotals">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals">[docs]</a>
<span class="k">class</span> <span class="nc">EutrophicationTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to calculate various eutrophication totals based on factors like emissions, residues, fertilizers, etc.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        loader_class (Loader): An instance of the Loader class to load data.</span>
<span class="sd">        residues_class (Residues): An instance of the Residues class to handle residue data.</span>
<span class="sd">        fertiliser_emissions_class (FertiliserInputs): An instance of the FertiliserInputs class to manage fertilizer emissions.</span>
<span class="sd">        upstream_class (Upstream): An instance of the Upstream class to deal with upstream data.</span>

<span class="sd">    Methods:</span>
<span class="sd">        create_emissions_dictionary(keys): Creates a dictionary to store emissions data.</span>
<span class="sd">        create_extended_emissions_dictionary(keys): Creates an extended dictionary to store emissions data including upstream.</span>
<span class="sd">        total_soils_NH3_and_LEACH_EP(data, urea_proportion, urea_abated_proportion): Calculates total emissions of NH3 and LEACH to soils.</span>
<span class="sd">        total_soils_P_LEACH_EP(data, urea_proportion, urea_abated_proportion): Calculates total emissions of P LEACH to soils.</span>
<span class="sd">        total_soils_EP(data, urea_proportion, urea_abated_proportion): Calculates total emissions of EP to soils.</span>
<span class="sd">        upstream_and_inputs_and_fuel_po4(data, urea_proportion, diesel_kg, elec_kwh): Calculates total PO4 emissions from upstream activities, inputs, and fuel usage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">residues_class</span> <span class="o">=</span> <span class="n">Residues</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span> <span class="o">=</span> <span class="n">Upstream</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="EutrophicationTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dictionary to store emissions data.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list): List of keys to be used in the emissions dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with emissions data initialized to zero.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">crop_keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">crop_emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">crop_key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">crop_emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">crop_keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">crop_keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">return</span> <span class="n">crop_emissions_dict</span></div>



<div class="viewcode-block" id="EutrophicationTotals.create_extended_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.create_extended_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_extended_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an extended dictionary to store emissions data including upstream.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list): List of keys to be used in the emissions dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: An extended dictionary with emissions data initialized to zero, including upstream data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream&quot;</span>
        <span class="p">]</span>

        <span class="n">crop_keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">crop_emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">crop_key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">crop_emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">crop_keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">crop_keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">crop_emissions_dict</span></div>


    <span class="c1"># SOILS</span>
<div class="viewcode-block" id="EutrophicationTotals.total_soils_NH3_and_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.total_soils_NH3_and_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_soils_NH3_and_LEACH_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total emissions of NH3 and LEACH to soils.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total emissions of NH3 and LEACH to soils.</span>
<span class="sd">       </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span><span class="o">.</span><span class="n">emissions_factors</span><span class="o">.</span><span class="n">get_ef_indirect_n2o_atmospheric_deposition_to_soils_and_water</span><span class="p">(</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">NH3N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span>
           <span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
        <span class="p">)</span>

        <span class="n">LEACH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_nleach</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_nleach</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span><span class="n">urea_proportion</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3N</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="n">LEACH</span> <span class="o">*</span> <span class="mf">0.42</span> <span class="c1">#N to PO4 0.42</span></div>

    

<div class="viewcode-block" id="EutrophicationTotals.total_soils_P_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.total_soils_P_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_soils_P_LEACH_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total emissions of P LEACH to soils.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total emissions of P LEACH to soils.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">PLEACH</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_P_leach</span><span class="p">(</span>
                <span class="n">data</span><span class="p">,</span>
                <span class="n">urea_proportion</span><span class="p">,</span>
                <span class="n">urea_abated_proportion</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_P_leach</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">p_fertiliser_P_leach</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">PLEACH</span> <span class="o">*</span> <span class="mf">3.06</span></div>



<div class="viewcode-block" id="EutrophicationTotals.total_soils_EP">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.total_soils_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_soils_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total emissions of EP to soils.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total emissions of EP to soils.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_soils_NH3_and_LEACH_EP</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_soils_P_LEACH_EP</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="EutrophicationTotals.upstream_and_inputs_and_fuel_po4">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.EutrophicationTotals.upstream_and_inputs_and_fuel_po4">[docs]</a>
    <span class="k">def</span> <span class="nf">upstream_and_inputs_and_fuel_po4</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">diesel_kg</span><span class="p">,</span>
        <span class="n">elec_kwh</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total PO4 emissions from upstream activities, inputs, and fuel usage.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about upstream activities, inputs, and fuel usage.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            diesel_kg (float): Amount of diesel used in kilograms.</span>
<span class="sd">            elec_kwh (float): Amount of electricity used in kilowatt-hours.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total PO4 emissions from upstream activities, inputs, and fuel usage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">diesel_PO4</span><span class="p">(</span><span class="n">diesel_kg</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">elec_PO4</span><span class="p">(</span><span class="n">elec_kwh</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">fert_upstream_po4</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
            <span class="p">))</span></div>
</div>

<span class="c1">###############################################################################</span>
<span class="c1"># Air Quality</span>
<span class="c1">###############################################################################</span>
<div class="viewcode-block" id="AirQualityTotals">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.AirQualityTotals">[docs]</a>
<span class="k">class</span> <span class="nc">AirQualityTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to calculate various air quality totals based on factors like emissions from soils.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        loader_class (Loader): An instance of the Loader class to load data.</span>
<span class="sd">        fertiliser_emissions_class (FertiliserInputs): An instance of the FertiliserInputs class to manage fertilizer emissions.</span>

<span class="sd">    Methods:</span>
<span class="sd">        create_emissions_dictionary(keys): Creates a dictionary to store emissions data.</span>
<span class="sd">        total_soils_NH3_AQ(data, urea_proportion, urea_abated_proportion): Calculates total NH3 emissions from soils.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loader_class</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="AirQualityTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.AirQualityTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dictionary to store emissions data.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list): List of keys to be used in the emissions dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with emissions data initialized to zero.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crop_key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">crop_keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">crop_emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">crop_key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">crop_emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">crop_keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">crop_keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">crop_emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">crop_emissions_dict</span></div>

    
    
<span class="c1"># SOILS</span>
<div class="viewcode-block" id="AirQualityTotals.total_soils_NH3_AQ">
<a class="viewcode-back" href="../../autoapi/crop_lca/lca/index.html#crop_lca.lca.AirQualityTotals.total_soils_NH3_AQ">[docs]</a>
    <span class="k">def</span> <span class="nf">total_soils_NH3_AQ</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">urea_proportion</span><span class="p">,</span>
        <span class="n">urea_abated_proportion</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total NH3 emissions from soils.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: Data containing information about fertilizer application.</span>
<span class="sd">            urea_proportion (float): Proportion of urea used.</span>
<span class="sd">            urea_abated_proportion (float): Proportion of urea that is abated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions from soils.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">NH3N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">urea_proportion</span><span class="p">,</span>
            <span class="n">urea_abated_proportion</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_emissions_class</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">urea_proportion</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">NH3N</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Colm Duffy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>